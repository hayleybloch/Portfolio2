(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{7321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(7876),i=r(9363),s=r.n(i),o=r(4232),a=r(5134),u=r(9049),c=r(2002);function l(e){let{application:t,args:r,windowContext:i}=e,[l,f]=(0,o.useState)(""),d=t.apis.fileSystem,{t:m}=(0,c.Bd)("common"),p=(0,o.useRef)();function v(e){let r=t.compositor.getById(i.id);if(!r)return;let n=(0,u.tG)(e);r.title="".concat(n," - Notes"),t.compositor.update(r)}return(0,o.useEffect)(()=>{let e=function(e){let r=function(e,t){let r=e.apis.fileSystem.getNode(t);return r.isOk()?"textfile"!==r.value.kind?(0,a._q)(Error("node type is not a textfile")):(0,a.ok)(r.value):(0,a._q)(r.error)}(t,e);if(!r.isOk())return r;let n=r.value;return f(n.content),p.current=n,r}(r);if(!e.isOk())return;let n=d.subscribe(e.value,t=>{v(e.value)});return v(e.value),()=>{n()}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:"system-button",onClick:function(){if(!p.current)return void function(){let e="/Users/hayley/Documents/",r=d.getDirectory(e);if(!r.isOk())return;let n=m("filesystem.new_file"),s=(0,u.Q1)(r.value,n),o=()=>{};t.compositor.prompt(i.id,m("notes.create_file_instructions"),s).then(n=>{if(d.getNode("".concat(e).concat(n,".txt")).isOk())return void t.compositor.alert(i.id,m("notes.create_file_duplicated_name")).catch(o);let s=d.addTextFile(r.value,n,l,!0);p.current=s,v(s)}).catch(o)}();p.current.content=l},children:"Save"})}),(0,n.jsx)("textarea",{className:["system-text-input",s().textarea].join(" "),value:l,onChange:e=>{f(e.target.value)}})]})}},9363:e=>{e.exports={textarea:"NotesView_textarea__317fZ"}}}]);